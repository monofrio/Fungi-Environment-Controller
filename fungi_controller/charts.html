  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://www.markonofrio.com/images/favicon.png">
    <title>Temperature Charts</title>

      <style>

      .axis--x path {
      display: none;
      }

      .line {
      fill: none;
      stroke: steelblue;
      stroke-width: 1.5px;
      }
      </style>
</head>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
// Sample Data: {"date":"2017-12-03 01:26:31","fahrenheit":"71"}
// Formated Data:  { "date": "03-Dec-17", "fahrenheit": "71"}
d3.select("body").append("h1").text("Temp Chart");
d3.select("body").append('svg').attr("width", "500").attr("height", "300");

var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var x = d3.scaleTime()
    .rangeRound([0, width]);

var y = d3.scaleLinear()
    .rangeRound([height, 0]);

//var line = d3.line()
//    .x(function(data) { return x(data.date); })
//    .y(function(data) { return y(data.fahrenheit); });


    d3.json('data.php',
        function(error, data) {
        if (error) return console.warn(error);
          var rows = data.length;

          console.log(rows);

          for(var i = 0; i < 15; i++){
              var line = d3.line()
                  .x(function(data) { return x(data.date); })
                  .y(function(data) { return y(data.fahrenheit); });

                x.domain(
                d3.extent(data[i], function(data) {
                    return data.date;
                }));

                y.domain(
                d3.extent(data[i], function(data) {
                    return data.fahrenheit;
                }));

          }

//            x.domain(
//                d3.extent(data, function(data) {
//                    return data.date;
//                }));
//
//            y.domain(
//                d3.extent(data, function(data) {
//                    return data.fahrenheit;
//                }));


            g.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x))
                .select(".domain")
                .remove();

            g.append("g")
                .call(d3.axisLeft(y))
                .append("text")
                .attr("fill", "#000")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", "0.71em")
                .attr("text-anchor", "end")
                .text("Fahrenheit");

            g.append("path")
                .datum(data)
                .attr("fill", "none")
                .attr("stroke", "steelblue")
                .attr("stroke-linejoin", "round")
                .attr("stroke-linecap", "round")
                .attr("stroke-width", 1.5)
                .attr("data", line);



    });
</script>
</body>
</html>
